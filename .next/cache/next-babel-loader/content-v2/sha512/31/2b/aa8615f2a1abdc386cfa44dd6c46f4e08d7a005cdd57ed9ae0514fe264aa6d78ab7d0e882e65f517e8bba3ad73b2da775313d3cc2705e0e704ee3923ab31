{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Anton\\\\source\\\\repos\\\\nextjs-course\\\\pages\\\\last-sales.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport useSWR from 'swr';\n\nfunction LastSalesPage(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(props.sales),\n      sales = _useState[0],\n      setSales = _useState[1]; // const [isLoading, setIsLoading] = useState(false);\n\n\n  var _useSWR = useSWR('https://nextjs-course-c81cc-default-rtdb.firebaseio.com/sales.json', function (url) {\n    return fetch(url).then(function (res) {\n      return res.json();\n    });\n  }),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  useEffect(function () {\n    if (data) {\n      var transformedSales = [];\n\n      for (var key in data) {\n        transformedSales.push({\n          id: key,\n          username: data[key].username,\n          volume: data[key].volume\n        });\n      }\n\n      setSales(transformedSales);\n    }\n  }, [data]); // useEffect(() => {\n  //   setIsLoading(true);\n  //   fetch('https://nextjs-course-c81cc-default-rtdb.firebaseio.com/sales.json')\n  //     .then((response) => response.json())\n  //     .then((data) => {\n  //       const transformedSales = [];\n  //       for (const key in data) {\n  //         transformedSales.push({\n  //           id: key,\n  //           username: data[key].username,\n  //           volume: data[key].volume,\n  //         });\n  //       }\n  //       setSales(transformedSales);\n  //       setIsLoading(false);\n  //     });\n  // }, []);\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Failed to load.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (!data && !sales) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    children: sales.map(function (sale) {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [sale.username, \" - $\", sale.volume]\n      }, sale.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LastSalesPage, \"lghZNGWenZyG6yG7jPC9/EhXHmw=\", false, function () {\n  return [useSWR];\n});\n\n_c = LastSalesPage;\nexport var __N_SSG = true;\nexport default LastSalesPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LastSalesPage\");","map":{"version":3,"sources":["C:/Users/Anton/source/repos/nextjs-course/pages/last-sales.js"],"names":["useEffect","useState","useSWR","LastSalesPage","props","sales","setSales","url","fetch","then","res","json","data","error","transformedSales","key","push","id","username","volume","map","sale"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,MAAP,MAAmB,KAAnB;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AAAA;;AAAA,kBACAH,QAAQ,CAACG,KAAK,CAACC,KAAP,CADR;AAAA,MACnBA,KADmB;AAAA,MACZC,QADY,iBAE1B;;;AAF0B,gBAIFJ,MAAM,CAAC,oEAAD,EAAuE,UAACK,GAAD;AAAA,WAASC,KAAK,CAACD,GAAD,CAAL,CAAWE,IAAX,CAAgB,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,KAAnB,CAAT;AAAA,GAAvE,CAJJ;AAAA,MAIlBC,IAJkB,WAIlBA,IAJkB;AAAA,MAIZC,KAJY,WAIZA,KAJY;;AAM1Bb,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIY,IAAJ,EAAU;AACN,UAAME,gBAAgB,GAAG,EAAzB;;AAEA,WAAK,IAAMC,GAAX,IAAkBH,IAAlB,EAAwB;AACpBE,QAAAA,gBAAgB,CAACE,IAAjB,CAAsB;AAClBC,UAAAA,EAAE,EAAEF,GADc;AAElBG,UAAAA,QAAQ,EAAEN,IAAI,CAACG,GAAD,CAAJ,CAAUG,QAFF;AAGlBC,UAAAA,MAAM,EAAEP,IAAI,CAACG,GAAD,CAAJ,CAAUI;AAHA,SAAtB;AAKH;;AAEDb,MAAAA,QAAQ,CAACQ,gBAAD,CAAR;AACH;AACJ,GAdQ,EAcN,CAACF,IAAD,CAdM,CAAT,CAN0B,CAsB1B;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,MAAIC,KAAJ,EAAW;AACP,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,MAAI,CAACD,IAAD,IAAS,CAACP,KAAd,EAAqB;AACjB,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAED,sBACI;AAAA,cACKA,KAAK,CAACe,GAAN,CAAU,UAACC,IAAD;AAAA,0BACP;AAAA,mBACKA,IAAI,CAACH,QADV,UACwBG,IAAI,CAACF,MAD7B;AAAA,SAASE,IAAI,CAACJ,EAAd;AAAA;AAAA;AAAA;AAAA,eADO;AAAA,KAAV;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AASH;;GA3DQd,a;UAImBD,M;;;KAJnBC,a;;AAgFT,eAAeA,aAAf","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport useSWR from 'swr';\r\n\r\nfunction LastSalesPage(props) {\r\n    const [sales, setSales] = useState(props.sales);\r\n    // const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const { data, error } = useSWR('https://nextjs-course-c81cc-default-rtdb.firebaseio.com/sales.json', (url) => fetch(url).then(res => res.json()));\r\n\r\n    useEffect(() => {\r\n        if (data) {\r\n            const transformedSales = [];\r\n\r\n            for (const key in data) {\r\n                transformedSales.push({\r\n                    id: key,\r\n                    username: data[key].username,\r\n                    volume: data[key].volume,\r\n                });\r\n            }\r\n\r\n            setSales(transformedSales);\r\n        }\r\n    }, [data]);\r\n\r\n    // useEffect(() => {\r\n    //   setIsLoading(true);\r\n    //   fetch('https://nextjs-course-c81cc-default-rtdb.firebaseio.com/sales.json')\r\n    //     .then((response) => response.json())\r\n    //     .then((data) => {\r\n    //       const transformedSales = [];\r\n\r\n    //       for (const key in data) {\r\n    //         transformedSales.push({\r\n    //           id: key,\r\n    //           username: data[key].username,\r\n    //           volume: data[key].volume,\r\n    //         });\r\n    //       }\r\n\r\n    //       setSales(transformedSales);\r\n    //       setIsLoading(false);\r\n    //     });\r\n    // }, []);\r\n\r\n    if (error) {\r\n        return <p>Failed to load.</p>;\r\n    }\r\n\r\n    if (!data && !sales) {\r\n        return <p>Loading...</p>;\r\n    }\r\n\r\n    return (\r\n        <ul>\r\n            {sales.map((sale) => (\r\n                <li key={sale.id}>\r\n                    {sale.username} - ${sale.volume}\r\n                </li>\r\n            ))}\r\n        </ul>\r\n    );\r\n}\r\n\r\nexport async function getStaticProps() {\r\n    const response = await fetch(\r\n        'https://nextjs-course-c81cc-default-rtdb.firebaseio.com/sales.json'\r\n    );\r\n    const data = await response.json();\r\n\r\n    const transformedSales = [];\r\n\r\n    for (const key in data) {\r\n        transformedSales.push({\r\n            id: key,\r\n            username: data[key].username,\r\n            volume: data[key].volume,\r\n        });\r\n    }\r\n\r\n    return { props: { sales: transformedSales } };\r\n}\r\n\r\nexport default LastSalesPage;"]},"metadata":{},"sourceType":"module"}