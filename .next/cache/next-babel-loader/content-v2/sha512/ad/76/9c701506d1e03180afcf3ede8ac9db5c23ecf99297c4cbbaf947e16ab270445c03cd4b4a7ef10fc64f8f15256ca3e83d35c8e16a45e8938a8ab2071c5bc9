{"ast":null,"code":"import fs from 'fs';\nimport path from 'path';\nexport function buildFeedbackPath() {\n  return path.join(process.cwd(), 'data', 'feedback.json');\n}\nexport function extractFeedback(filePath) {\n  const fileData = fs.readFileSync(filePath);\n  const data = JSON.parse(fileData);\n  return data;\n}\n\nfunction handler(req, res) {\n  if (req.method === 'POST') {\n    const email = req.body.email;\n    const feedbackText = req.body.text;\n    const newFeedback = {\n      id: new Date().toISOString(),\n      email: email,\n      text: feedbackText\n    }; // store that in a database or in a file\n\n    const filePath = buildFeedbackPath();\n    const data = extractFeedback(filePath);\n    data.push(newFeedback);\n    fs.writeFileSync(filePath, JSON.stringify(data));\n    res.status(201).json({\n      message: 'Success!',\n      feedback: newFeedback\n    });\n  } else {\n    const filePath = buildFeedbackPath();\n    const data = extractFeedback(filePath);\n    res.status(200).json({\n      feedback: data\n    });\n  }\n}\n\nexport default handler;","map":{"version":3,"sources":["C:/Users/Anton/source/repos/nextjs-course/pages/api/feedback/index.js"],"names":["fs","path","buildFeedbackPath","join","process","cwd","extractFeedback","filePath","fileData","readFileSync","data","JSON","parse","handler","req","res","method","email","body","feedbackText","text","newFeedback","id","Date","toISOString","push","writeFileSync","stringify","status","json","message","feedback"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP,MAAiB,MAAjB;AAEA,OAAO,SAASC,iBAAT,GAA6B;AAChC,SAAOD,IAAI,CAACE,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyB,MAAzB,EAAiC,eAAjC,CAAP;AACH;AAED,OAAO,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AACtC,QAAMC,QAAQ,GAAGR,EAAE,CAACS,YAAH,CAAgBF,QAAhB,CAAjB;AACA,QAAMG,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,QAAX,CAAb;AACA,SAAOE,IAAP;AACH;;AAED,SAASG,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACvB,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACvB,UAAMC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASD,KAAvB;AACA,UAAME,YAAY,GAAGL,GAAG,CAACI,IAAJ,CAASE,IAA9B;AAEA,UAAMC,WAAW,GAAG;AAChBC,MAAAA,EAAE,EAAE,IAAIC,IAAJ,GAAWC,WAAX,EADY;AAEhBP,MAAAA,KAAK,EAAEA,KAFS;AAGhBG,MAAAA,IAAI,EAAED;AAHU,KAApB,CAJuB,CAUvB;;AACA,UAAMZ,QAAQ,GAAGL,iBAAiB,EAAlC;AACA,UAAMQ,IAAI,GAAGJ,eAAe,CAACC,QAAD,CAA5B;AACAG,IAAAA,IAAI,CAACe,IAAL,CAAUJ,WAAV;AACArB,IAAAA,EAAE,CAAC0B,aAAH,CAAiBnB,QAAjB,EAA2BI,IAAI,CAACgB,SAAL,CAAejB,IAAf,CAA3B;AACAK,IAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE,UAAX;AAAuBC,MAAAA,QAAQ,EAAEV;AAAjC,KAArB;AACH,GAhBD,MAgBO;AACH,UAAMd,QAAQ,GAAGL,iBAAiB,EAAlC;AACA,UAAMQ,IAAI,GAAGJ,eAAe,CAACC,QAAD,CAA5B;AACAQ,IAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEE,MAAAA,QAAQ,EAAErB;AAAZ,KAArB;AACH;AACJ;;AAED,eAAeG,OAAf","sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nexport function buildFeedbackPath() {\r\n    return path.join(process.cwd(), 'data', 'feedback.json');\r\n}\r\n\r\nexport function extractFeedback(filePath) {\r\n    const fileData = fs.readFileSync(filePath);\r\n    const data = JSON.parse(fileData);\r\n    return data;\r\n}\r\n\r\nfunction handler(req, res) {\r\n    if (req.method === 'POST') {\r\n        const email = req.body.email;\r\n        const feedbackText = req.body.text;\r\n\r\n        const newFeedback = {\r\n            id: new Date().toISOString(),\r\n            email: email,\r\n            text: feedbackText,\r\n        };\r\n\r\n        // store that in a database or in a file\r\n        const filePath = buildFeedbackPath();\r\n        const data = extractFeedback(filePath);\r\n        data.push(newFeedback);\r\n        fs.writeFileSync(filePath, JSON.stringify(data));\r\n        res.status(201).json({ message: 'Success!', feedback: newFeedback });\r\n    } else {\r\n        const filePath = buildFeedbackPath();\r\n        const data = extractFeedback(filePath);\r\n        res.status(200).json({ feedback: data });\r\n    }\r\n}\r\n\r\nexport default handler;"]},"metadata":{},"sourceType":"module"}